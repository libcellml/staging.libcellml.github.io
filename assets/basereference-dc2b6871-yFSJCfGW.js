import{aZ as l,a$ as g,a_ as p}from"./index-BC701uVD.js";import{x as h}from"./methods-f5038371-DjORvlZA.js";const{determinePageLocation:u,determinePageName:c,isInternalReference:m,isReferenceToCurrentPage:R,parentLevelsInRefURI:d}=h(),I=(t,f,r)=>{const n=l();return{onReferenceCreated:()=>{if(m(t)){let a=g(f),e=p(f);const s=t.getAttribute("refid");if(s&&!s.startsWith("#")?r.value.hash="#"+s:r.value.hash=s,!R(t)){a=c(t,f);let i=d(t);if(n.isOffsetReferenceURL(e)&&i){let o=e.split("/");for(;i--;)o.pop();o.length===1?e="/":e=o.join("/")}r.value.hash=u(t),n.hasPageById(e,a)||n.fetchPage({page_name:a,page_route:e,page_url:n.getBaseUrl(e)})}r.value.path=e==="/"?e+a:e+"/"+a}}}};export{I};
